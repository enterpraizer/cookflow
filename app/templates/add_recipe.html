{% extends "base.html" %}
{% block title %}Добавить рецепт{% endblock %}

{% block content %}
<h1>Добавить рецепт</h1>

<form id="recipeForm" class="card" enctype="multipart/form-data">
  <input id="title" class="input" placeholder="Название" required>
  <textarea id="description" class="textarea" placeholder="Описание"></textarea>

  <div class="row">
    <input id="cooking_time" class="input" type="number" min="0" placeholder="Время (мин)">
    <select id="difficulty" class="input">
      <option value="">Сложность (необязательно)</option>
      <option value="Легко">Легко</option>
      <option value="Средне">Средне</option>
      <option value="Сложно">Сложно</option>
    </select>
    <input id="servings" class="input" type="number" min="1" placeholder="Порции">
  </div>

  <div class="card" style="padding:12px;">
    <div class="muted">Изображение рецепта (JPG/PNG/WebP, до 5MB)</div>
    <input id="image" class="input" type="file" accept=".jpg,.jpeg,.png,.webp,image/jpeg,image/png,image/webp">
  </div>

  <div class="card" style="padding:12px;">
    <div class="row row-between">
      <h3 style="margin:0;">Ингредиенты</h3>
      <button type="button" id="addIngredientBtn" class="btn btn-outline">+ Добавить</button>
    </div>
    <div id="ingredientsBox" class="stack"></div>
  </div>

  <div class="card" style="padding:12px;">
    <div class="row row-between">
      <h3 style="margin:0;">Шаги приготовления</h3>
      <button type="button" id="addStepBtn" class="btn btn-outline">+ Добавить</button>
    </div>
    <div id="stepsBox" class="stack"></div>
  </div>

  <div class="card" style="padding:12px;">
    <div class="muted">Категории (через запятую, например: Завтраки, Быстро)</div>
    <input id="categories" class="input" placeholder="Категории">
  </div>

  <button class="btn" type="submit"><i class="fa-solid fa-plus"></i> Создать рецепт</button>
</form>
{% endblock %}

{% block scripts %}
<script>
  window.addEventListener("DOMContentLoaded", async () => {
    await CookFlow.initAuthUI();
    CookFlow.recipeFormInit();
  });
</script>
{% endblock %}
